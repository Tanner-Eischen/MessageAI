-- AI Analysis table for local caching of tone and intent analysis
CREATE TABLE ai_analysis (
  id TEXT PRIMARY KEY NOT NULL,
  message_id TEXT NOT NULL,
  tone TEXT NOT NULL,
  urgency_level TEXT,
  intent TEXT,
  confidence_score REAL,
  analysis_timestamp INTEGER NOT NULL,
  is_synced INTEGER NOT NULL DEFAULT 0,
  created_at INTEGER NOT NULL,
  updated_at INTEGER NOT NULL
);

-- Index for efficient lookups by message
CREATE INDEX IF NOT EXISTS idx_ai_analysis_message_id ON ai_analysis(message_id);

-- Index for timestamp queries
CREATE INDEX IF NOT EXISTS idx_ai_analysis_timestamp ON ai_analysis(analysis_timestamp DESC);

